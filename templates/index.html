<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/static/style.css">
    <title>WeatherFetch</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

</head>
{% if condition %}
<body class = "{{condition}}">
    <div class = "card">

{% else %}
<body>
    <div class = "card">
{% endif %}
        <div class = "card-title">     
            <img class = "main-dog"src="/static/img/dog_4.png">   
            <h1 id = "weather-fetch">WeatherFetch</h1>
            <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 24 24" fill="white" stroke="#fdfdfd" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bone-icon lucide-bone responsive-icon"><path d="M17 10c.7-.7 1.69 0 2.5 0a2.5 2.5 0 1 0 0-5 .5.5 0 0 1-.5-.5 2.5 2.5 0 1 0-5 0c0 .81.7 1.8 0 2.5l-7 7c-.7.7-1.69 0-2.5 0a2.5 2.5 0 0 0 0 5c.28 0 .5.22.5.5a2.5 2.5 0 1 0 5 0c0-.81-.7-1.8 0-2.5Z"/></svg>
        </div>
        <form method="POST" action="/">
            <div class = "user-input">
                <input type = "text" id ="city" name = "city" placeholder="Enter City" required/>
                <!-- <input type = "text" id = "state" name = "state" placeholder="Enter State" required> -->
                <select name = "state" required>
                    <option value ="" disabled selected>Select State</option>
                    {% for key, value in all_states.items() %} 
                        <option value ="{{ key }}">{{ value }}</option>
                    {% endfor %}
                </select>
                <button type="submit">Submit</button>
            </div>
        </form>
            {% if error %}
        <p id="error">{{error}}</p>
    {% endif %}

        {% if weather %}
        
        <p id = "{{dog['color_message']}}">{{dog["dog_warning"]}}</p>
        <div class = "weather-section">
            <div> 
                {% if dog['color_message'] == "danger" or dog['color_message'] == "red" %}
                    <img id = "dog_3" src="/static/img/dog_3.png"/>
                {% else%}
                    <img id = "dog_1" src="/static/img/dog_1.png"/>
                {% endif %}
            </div>

            <div class = "temp-section">
                <p id="user_city">{{weather["city"]}} {{state}}, US</p>
                <img src="https://openweathermap.org/img/wn/{{ weather['icon'] }}@2x.png" alt="Weather Image"/>
                <p id = "temp">{{weather["temperature"]}}</p>
                <p>Feels like {{weather["feels_temp"]}}</p>
                <p>Humidity: {{weather["humidity"]}}%</p>
            </div>
            <div> 
                {% if dog['color_message'] == "danger" or dog['color_message'] == "red" %}
                    <img id = "dog_5" src="/static/img/dog_5.png"/>
                {% else%}
                    <img id = "dog_2" src="/static/img/dog_2.png"/>
                {% endif %}
            </div>

        </div>
        <div class = "more-details">
            <div class = "card-section">
                <h3>Weather Details</h3>
                <p>Mainly: {{weather["condition"]}}</p>
                <p>Description: {{weather["description"]}}</p>
                <p>Wind: {{weather["wind"]}}mph</p>
                <p>Wind Gust: {{weather["wind_gust"]}}mph</p>
                <p>Sunrise: {{weather["sunrise"]}}</p>
                <p>Sunset: {{weather["sunset"]}}</p>
            </div>
            <div class = "card-section">
                <div class = "card-section-title">
                    <h3>Walk Suggestions</h3>
                    <span id = "info-icon" title="Based on current weather only. Please consider conditions throughout the day and your dog's comfort."><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#696868" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info-icon lucide-info"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg></span>
                </div>
                <p>{{dog["walk_times"]["morning"]}}</p>
                <p>{{dog["walk_times"]["afternoon"] | safe}}</p>
                <p>{{dog["walk_times"]["evening"]}}</p>
                <p>{{dog["walk_times"]["note"]}}</p>
            </div>
        </div>
    {% endif %}
    </div>

<script>
  lucide.createIcons();
</script>
<footer>
    <div class = "disclaimer">
        <p><i class="bi bi-exclamation-triangle" aria-hidden="true"></i>
        This app is for general information only and does not replace professional veterinary advice.</p>
    </div>
</footer>
</body>
</html>